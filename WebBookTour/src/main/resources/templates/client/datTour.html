<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <title>Thông tin Tour</title>
  <style>
    pre {
      font-family: Arial, sans-serif;  /* Thay đổi font chữ */
      font-size: 16px;                 /* Điều chỉnh kích thước chữ */
      line-height: 1.5;                /* Điều chỉnh khoảng cách giữa các dòng */
      white-space: pre-wrap;           /* Giữ nguyên định dạng nhưng có thể xuống dòng tự động */
      word-wrap: break-word;           /* Cho phép từ dài bị cắt khi hết dòng */
      background-color: #f4f4f4;      /* Thêm màu nền */
      padding: 10px;                   /* Khoảng cách giữa văn bản và viền */
      border-radius: 5px;              /* Bo góc */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);  /* Thêm bóng đổ */
    }
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #dddddd;
      color: #333;
    }

    .container {
      display: flex;
      justify-content: space-between;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .main-content {
      flex: 3;
      padding-right: 20px;
      background-color: #fff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .tour-title {
      font-size: 2.0rem;
      margin-top: 30px;
      margin-bottom: 30px;
      color: #2c3e50;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-align: center;
    }
    .contact-info, .passenger-info, .passenger-details {
      margin-bottom: 30px;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }


    .contact-info h3, .passenger-info h3, .passenger-details h3 {
      margin-bottom: 20px;
      color: #2c3e50;
      text-transform: uppercase;
    }

    .contact-info input,
    .contact-info select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .passenger-info {
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* Chia thành 2 cột bằng nhau */
      gap: 20px; /* Khoảng cách giữa các cột */
    }

    .passenger-info .title-row {
      grid-column: span 2; /* Tiêu đề chiếm toàn bộ chiều rộng (2 cột) */
      margin-bottom: 20px;
      color: #2c3e50;
      text-transform: uppercase;
    }

    .passenger-info h3 {
      font-size: 1.5rem;
      color: #2c3e50;
      text-transform: uppercase;
    }

    .passenger-info .form-control-group {
      display: flex;
      flex-direction: column; /* Sắp xếp label và input theo cột */
    }

    .passenger-info label {
      margin-bottom: 5px;
      font-weight: bold;
    }

    .passenger-info input {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }



    .main-image img {
      width: 450px;
      height: 300px;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
    }




    .itinerary h2 {
      text-align: center;
      color: #3498db;
      font-size: 2rem;
      margin-bottom: 20px;
    }



    .sidebar {
      flex: 1;
      position: sticky;
      top: 20px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin-left: 20px;
      height: fit-content; /* Đảm bảo chiều cao của sidebar là tự động theo nội dung */
      min-height: 100%; /* Đảm bảo sidebar không bị nhỏ hơn chiều cao của .tour-info */
    }

    .tour-info {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      font-size: 1.1rem;
      color: #34495e;

    }

    .tour-info div {
      margin-bottom: 12px;
      font-size: 1.1rem;
    }

    .tour-info strong {
      color: #3498db;
    }
    .child {
      display: flex; /* Bố trí các phần tử theo hàng ngang */
      gap: 10px; /* Khoảng cách giữa các phần tử */
      align-items: center; /* Canh giữa các trường theo chiều dọc */
    }

    .child .form-group {
      display: flex;
      flex-direction: column; /* Đảm bảo nhãn và input nằm theo chiều dọc */
    }

    .child .form-group.flex-grow-1 {
      flex: 1; /* Trường "Họ và Tên" chiếm nhiều không gian hơn */
    }


    .child {
      display: flex; /* Bố trí các phần tử theo hàng ngang */
      gap: 10px; /* Khoảng cách giữa các phần tử */
      align-items: center; /* Canh giữa các trường theo chiều dọc */
    }

    .adult .form-group {
      display: flex;
      flex-direction: column; /* Đảm bảo nhãn và input nằm theo chiều dọc */
    }

    .adult .form-group.flex-grow-1 {
      flex: 1; /* Trường "Họ và Tên" chiếm nhiều không gian hơn */
    }

    .me-2 {
      margin-right: 0.5rem; /* Khoảng cách giữa các phần tử */
    }
    @media screen and (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
      }

      .main-content {
        flex: 1;
        padding-right: 0;
      }

      .tour-images {
        flex-direction: column;
      }

      .main-image img {
        width: 100%;
        height: auto;
      }

      .image-thumbnails img {
        width: 120px;
        height: 120px;
      }
    }


  </style>
</head>
<body>
<div class="container">
  <!-- Bố cục chính -->
  <div class="main-content">
    <h2 class="tour-title">Đặt Tour</h2>

    <!-- Phần 1: Thông tin liên lạc -->
    <div class="contact-info">
      <h3>Thông tin liên lạc</h3>
      <form id="contactForm">
        <label for="name">Họ và Tên:</label>
        <input type="text" id="name" name="name" required>

        <label for="phone">Số Điện Thoại:</label>
        <input type="tel" id="phone" name="phone" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
      </form>
    </div>

    <!-- Phần 2: Hành khách -->

    <div class="passenger-info">
      <div class="title-row">
        <h2>Hành Khách</h2>
      </div>
      <!-- Người lớn -->
      <div class="form-control-group">
        <label for="adults">Người lớn:</label>
        <input class="form-control" type="number" id="adults" name="adults" value="1" min="1" max="100" required>
      </div>

      <!-- Trẻ em -->
      <div class="form-control-group">
        <label for="children">Trẻ em:</label>
        <input class="form-control" type="number" id="children" name="children" value="0" min="0" max="100" required>
      </div>
    </div>


    <!-- Phần 3: Thông tin hành khách -->
    <div class="passenger-details">
      <h3>Thông tin Hành khách</h3>

      <!-- Người lớn -->
      <div id="adultDetails">
        <h4>Người lớn</h4>
        <div class="adult d-flex align-items-center">
          <div class="form-group flex-grow-1 me-2">
            <label>Họ và Tên:</label>
            <input type="text" class="form-control" required>
          </div>

          <div class="form-group me-2">
            <label>Giới tính:</label>
            <select name="adultGender[]" class="form-select">
              <option value="male">Nam</option>
              <option value="female">Nữ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ngày Sinh:</label>
            <input type="date" name="adultDob[]" class="form-control" required>
          </div>
        </div>
      </div>

      <!-- Trẻ em -->
      <div id="childDetails">
        <h4>Trẻ em</h4>

      </div>
    </div>
  </div>

  <!-- Bố cục phụ (Right Sidebar) -->
  <div class="sidebar">
    <div class="tour-info">

      <div>Người lớn :    </div>
      <div>Trẻ em :   </div>
      <div>Tổng tiền :    <!--/*@thymesVar id="tochuctourDto" type="com.example.WebBookTour.dto.TochuctourDto"*/-->
      <div id="giaTour" th:data-number="${tochuctourDto.getIdTourDuLich().getGiaTour()}"></div>
      </div>
      <button class="btn btn-primary btn-book " id="btnDatTour">Thanh Toán</button>

    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-input-spinner@3.1.6/src/bootstrap-input-spinner.min.js"></script>
<script th:inline="javascript">

    $("#adults").inputSpinner({
      buttonsOnly: true
    });

    $("#children").inputSpinner({
      buttonsOnly: true
    });



  let SoChoNguoiLon = parseInt($("#adults").val(), 10);
    let SoChoTreEm = parseInt($("#children").val(), 10);
  $("#adults").on("input", function()
  {
    const adults = parseInt($("#adults").val(), 10);
    const children = parseInt($("#children").val(), 10);
    const tongSoCho = adults + children ;
    let maxSoCho = [[${tochuctourDto.soChoCon}]];
    maxSoCho = maxSoCho - adults;
    maxSoCho = maxSoCho - children;
    // console.log(tongSoCho);
    // console.log(maxSoCho);
    console.log(SoChoNguoiLon);
    console.log(adults);


    // Thêm thông tin người lớn
    if ((SoChoNguoiLon <= adults)){
      if ((maxSoCho>=0)&&(SoChoNguoiLon!=adults)) {
        $("#adultDetails").append(`
        <div class="adult d-flex align-items-center">
  <div class="form-group flex-grow-1 me-2">
    <label>Họ và Tên:</label>
    <input type="text" class="form-control" required>
  </div>

  <div class="form-group me-2">
    <label>Giới tính:</label>
    <select name="adultGender[]" class="form-select">
      <option value="male">Nam</option>
      <option value="female">Nữ</option>
    </select>
  </div>

  <div class="form-group">
    <label>Ngày Sinh:</label>
    <input type="date" name="adultDob[]" class="form-control" required>
  </div>
</div>
      `);
      }
      else
      {
        alertError("Vượt quá số chỗ còn lại !");
      }

    } else
    {
      if (SoChoNguoiLon>1)  $("#adultDetails .adult").last().remove();
    }
    SoChoNguoiLon = adults;

    // Thêm thông tin trẻ em
//     for (let i = 1; i <= children; i++) {
//       $("#childDetails").append(`
//         <div class="child d-flex align-items-center">
//   <div class="form-group flex-grow-1 me-2">
//     <label>Họ và Tên:</label>
//     <input type="text"  class="form-control" required>
//   </div>
//
//   <div class="form-group me-2">
//     <label>Giới tính:</label>
//     <select name="childGender[]" class="form-select">
//       <option value="male">Nam</option>
//       <option value="female">Nữ</option>
//     </select>
//   </div>
//
//   <div class="form-group">
//     <label>Ngày Sinh:</label>
//     <input type="date" name="childDob[]" class="form-control" required>
//   </div>
// </div>
//       `);
//
//     }
    $("#adults").attr("max",adults + maxSoCho);
    $("#children").attr("max",children+ maxSoCho);


  });
    $("#children").on("input", function()
    {
      const adults = parseInt($("#adults").val(), 10);
      const children = parseInt($("#children").val(), 10);
      const tongSoCho = adults + children ;
      let maxSoCho = [[${tochuctourDto.soChoCon}]];
      maxSoCho = maxSoCho - adults;
      maxSoCho = maxSoCho - children;
      // console.log(tongSoCho);
      // console.log(maxSoCho);
      console.log(SoChoTreEm);
      console.log(children);



      if ((SoChoTreEm <= children)){
        if ((children>=0)&&(SoChoTreEm!=children)) {
                $("#childDetails").append(`
        <div class="child d-flex align-items-center">
  <div class="form-group flex-grow-1 me-2">
    <label>Họ và Tên:</label>
    <input type="text"  class="form-control" required>
  </div>

  <div class="form-group me-2">
    <label>Giới tính:</label>
    <select name="childGender[]" class="form-select">
      <option value="male">Nam</option>
      <option value="female">Nữ</option>
    </select>
  </div>

  <div class="form-group">
    <label>Ngày Sinh:</label>
    <input type="date" name="childDob[]" class="form-control" required>
  </div>
</div>
      `);
        }
        else
        {
          alertError("Vượt quá số chỗ còn lại !");
        }

      } else
      {
        if (SoChoTreEm>0)  $("#childDetails .child").last().remove();
      }
      SoChoTreEm = children;

      $("#adults").attr("max",adults + maxSoCho);
      $("#children").attr("max",children+ maxSoCho);
    });

  // updatePassengerDetails();

  function formatCurrency(number) {
    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(number);
  }


  const number = parseFloat($("#giaTour").attr('data-number'));
  $("#giaTour").text(formatCurrency(number));



</script>
<script th:src="@{/js/thietketour/datchotourclient.js}"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
</body>
</html>
